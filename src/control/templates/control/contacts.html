{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Gestion des contacts</title>
<link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="{% static 'control/css/styles.css' %}">
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {
    font-family: 'Ubuntu', sans-serif;
    background: #f5f5f5;
    margin: 0;
    padding-top: 70px;
}
.container {
    max-width: 480px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
}
h2 { text-align: center; color: #458651; margin-bottom: 20px; }
form { display: flex; gap: 10px; margin-bottom: 15px; }
input { flex: 1; padding: 8px; border-radius: 6px; border: 1px solid #ccc; font-family: 'Ubuntu', sans-serif; }
button { padding: 8px 12px; border: none; border-radius: 6px; cursor: pointer; font-family: 'Ubuntu', sans-serif; }
button.add { background-color: #458651; color: white; }
button.delete { background-color: #d9534f; color: white; }
ul { list-style: none; padding: 0; margin: 0; }
li { display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #eee; }
@media (max-width: 400px) {
    form { flex-direction: column; }
    input, button { width: 100%; }
}
</style>
</head>
<body>
{% include 'control/header.html' %}
<div class="container">
    <h2>Liste de diffusion</h2>
        <form method="POST" action="{% url 'control:manage-contacts' %}">

        {% csrf_token %}
        <input type="email" name="email" placeholder="Nouvel email" required>
        <button type="submit" class="add">Ajouter</button>
    </form>

    <ul>
        {% for c in contacts %}
        <li>
            {{ c.destinataire }}
            <form method="POST" style="margin:0;" action="{% url 'control:manage-contacts' %}">
                {% csrf_token %}
                <input type="hidden" name="delete_id" value="{{ c.id }}">
                <button type="submit" class="delete">Supprimer</button>
            </form>
        </li>
        {% empty %}
        <li>Aucun contact pour le moment</li>
        {% endfor %}
    </ul>
</div>
</body>
</html>